@import "tools.less";

@menuWidth:390px;
@menuWidthOpen:470px;
@cardCount:2;

.overflow {
  position:absolute;
  left:0;
  right:0;
  top:0;
  bottom:0;
  overflow:hidden;
}

body, h1, h2, h3, h4, h5, h6, legend, .btn-red, select {
  font-family:"Gill", "Helvetica Neue", Helvetica, Arial, sans-serif;
  letter-spacing:0.05em;
  font-weight:200;
}

h1 {
  font-size: 31px;
  line-height: 33px;
  color: #FFF;
  text-transform: uppercase;  
}

input.input-search {
  border:0;
  padding:6px 10px;
  padding-top:9px;
  margin-top:5px;
  width:223px - (2px * 10px);
  height:34px - (2px * 6px);
  background:url("../images/accordeon-recherche.png") no-repeat 0 0;
  .box-shadow(0);

  &:focus {    
    .box-shadow(0);
    outline:0;
  }
}

select, input[type="file"] {
  border:0;
  width:223px;
  height: 34px;
  line-height: 34px;
  background:url("../images/accordeon-menuderoulant.png") no-repeat 0 0;
  padding-top:9px;

  &:disabled, &.disabled, .disabled & {
    background-image:url("../images/accordeon-menuderoulant-disabled.png");  
  }
}

.ios select {
  background-image:url("../images/accordeon-menuderoulant-ios.png");
}


input.btn-red, button.btn-red, .btn-red,
input.btn-white, button.btn-white, .btn-white {
  padding: 7px 0;
  width:130px;
  height:35px;
  border:0;
  .box-shadow(~"0px !important");
  .transition(~"0s !important");
  margin-bottom: 0; // For input.btn  
  margin-top:5px;

  font-size: 13px;
  line-height: 29px;
  *line-height: 29px;

  color:white;
  text-transform: uppercase; 
  text-shadow:none;

  &.btn-red, &.btn-red:focus, &.btn-red:active {

    padding-top:6px;
    margin-top:0;
    white-space:nowrap;
    background:url("../images/btrouge.png") no-repeat 0 0 white;

    &:hover {

      color:white;
      background:url("../images/btrouge.png") no-repeat -139px 0 white !important;
    }  

    &.btn-long, &.btn-long:focus, &.btn-long:active {
      width:180px;      
      background-image:url("../images/btroug-long.png"); 

      &:hover {           
        background-position:-188px 0 !important; 
        background-image:url("../images/btroug-long.png") !important; 
      }
    }

  }

  &.btn-white {

    white-space:nowrap;
    background:url("../images/btblanc.png") no-repeat 0 1px white;
    width:115px;
    height:20px;
    color:#000;

    line-height: 20px;
    *line-height: 20px;

    &:hover, &:focus, &:active {
      color:#000;
      background:url("../images/btblanc.png") no-repeat -123px 1px white !important;
    }  


    &.btn-long {
      font-size:10px;
      width:180px;      
      background-image:url("../images/btblanc-long.png"); 

      &:hover, &:focus, &:active {           
        background-position:-188px 0 !important; 
        background-image:url("../images/btblanc-long.png") !important; 
      }
    }

  }
}


.checkbox {

  padding-left:0;

  input[type="checkbox"] {
    display:none;
  }

  input[type="checkbox"] + label {
    position:relative;
    padding:10px;
    padding-left:20px;
    display:block;
  }

  input[type="checkbox"] + label:before {
    content:"";

    position:absolute;
    top:7px;
    left:0;

    width:16px;
    height:16px;
    background:url("../images/accordeon-checkbox.png") no-repeat 0 0;
  }

  input[type="checkbox"]:checked + label:before {
    background-position:-50px 0;
  }

}

#reload {
  position:absolute;
  right:20px;
  top:20px;

  z-index:100;
}

#map {

  min-width:800px;
  position:absolute;
  top:0;
  left:@menuWidth;
  bottom:-30px;
  right:0;

  padding:0;
  margin:0;

  z-index:10;

  // Bootstrap conflict with Google Maps
  // @src http://stackoverflow.com/questions/7471830/google-maps-api-v3-weird-ui-display-glitches-with-screenshot
  img { max-width: none; }

  .js-info-box {

    position:relative; 
    z-index:2000;   
    background:white;
    padding:12px 13px;
    width:200px;
    //margin-left:-126px;
    max-height:200px;
    .border-radius(5px);
    .box-shadow(0 2px 20px 0 rgba(0,0,0,0.5) );
    .transition(max-height 0.6s);

    h4 {
      padding:0;
      padding-bottom:5px;
      margin:0;
      font-size: 18px;
      line-height:20px;
      color: #E31B1D;
      text-transform: uppercase;
      position:relative;
      z-index:20;

      small {
        color: #E31B1D;
        font-size: 12px;
        line-height:14px;
        display:block;  
        padding:0;
      }
    }

    p {
      padding:0;
      margin:0;
      line-height:18px;
    }

    &:after {
      content:"";
      position:absolute;
      bottom:-7px;
      left:50%;
      margin-left:-10px;
      background:white;
      width:20px;
      height:20px;
      z-index:10;
      .rotate(45deg);
      .box-shadow(10px 10px 10px 0 rgba(0,0,0,0.2) );
    }

    .btn {
      position:relative;
      z-index:10000000;
    }

    &.js-open {

      padding-bottom:0;

      .btn, p {
        visibility: hidden;
      }      

    }

  }
}


#menu {  
  position:absolute;
  top:0;
  bottom:0;
  left:0;

  z-index:20;
  width:@menuWidth;
  overflow:hidden;  
  background:#fff;
  .box-shadow(0 0 50px fade(black, 100%));
  .transition(0.7s);

  font-size: 14px;
  line-height: 16px;  
  letter-spacing:0.05em;
  color: #666;

  &.detail {

    width:@menuWidthOpen;

    .menu-header {
      width:@menuWidthOpen - (1px * 10px);
    }

  }

  .menu-header {

    position:relative;
    z-index:-1;
    color:white;
    padding:10px;
    margin:0 -10px;
    margin-bottom:0;
    height:276px;
    background: url("../images/tetiere-fond.png") 0px 0px;
    font-size:25px;
    text-align: center;
    .transition(0.7s);
    width:@menuWidth - (1px * 10px);

    h1, .idf, .pointeurs, .batiments, .batiment2, .lycee, .explore {
      .transition(0.7s);
      .opacity(100);
      letter-spacing:0.05em;
    }


    &:after {
      content:"";
      position:absolute;
      bottom:0;
      left:0;
      right:0;
      height:28px;
      background: url("../images/tetiere-shadow.png");
    }

    .lycee {
      position:absolute;      
      top:195px;
      text-transform: uppercase;
      color:#fff;
      font-size:25px;
      line-height:28px;
      text-align:center;
      padding:10px;    
      padding-top:0;  
      left:10px;
      width:@menuWidthOpen - (2px*10px);
      margin-left:@menuWidthOpen;

      small {
        color:#fff;
        font-size:12px;
        line-height:14px;
        display:block;
        min-height:10px;
        padding-top:5px;
      }
    }

    .idf {
      position:absolute;
      top:85px;
      left:50%;
      margin-left:170px/-2px;
    }


    .batiments {
      position:absolute;
      top:120px;
      left:10px;
      
      height:82px;
      width:390px;
      background:url("../images/batiments.png") repeat 0 0;
      .transition(0.7s);
    }

    .batiment2 {
      position:absolute;
      top:135px;
      left:50%;      
      margin-left:158px/-2px;
    }


    .batiment2 {
      top:125px;
      margin-left:@menuWidth;
    }


    .explore {
      position:absolute;
      top:210px;

      width:100%;
      font-size: 15px;
      line-height: 19px;
      text-transform: uppercase;
      margin:0;
    }

    .pointeurs {
      position:absolute;
      top:175px;
      left:45px;
      margin-left:0;
    }
  }

  &.detail .menu-header {
    height:176px-(10px*2px);
    background-position:0 -100px;

    h1, .idf {
      .opacity(0);
      margin-top:-100px;
      margin-left:-1px * @menuWidth;
    }

    .batiments,  .pointeurs, .explore {
      .opacity(100);
      margin-top:-100px;
      margin-left:-1px * @menuWidth;
    }

    .explore {
      margin-top:-100px;
    }

    .batiment2 {      
      margin-top:-100px;
      margin-left:163px/-2px;
    }

    .lycee {
      margin:0; 
      top:95px;
    }

  }


  .legend {

    .transition(0.7s);
    .opacity(0);

    height:0;
    padding-bottom:10px;
    overflow:hidden;

    img {
      display:block;
      margin:10px auto;
    }

  }

  &.with-legend .legend {
    height:auto;
    .opacity(100);
  }

  .slider {

    width:@menuWidthOpen;
    overflow:hidden;   
    padding-top:5px;

    .card {
      width:@menuWidth;      
      overflow:auto;
      float:left;
      .transition(0.7s);

      &.large {
        width:@menuWidthOpen;
      }

      .lycee {
        padding:10px 15px;

      }
    }

    .wrapper {
      width:@menuWidth+@menuWidthOpen;
    }

  }

  .back {    
    margin:0;
    padding:0;
    position:absolute;
    top:138px + 120px;
    right:-1px * ( @menuWidthOpen + 40px );
    text-indent:9999px;
    color:transparent;
    background: url("../images/tetiere-bt.png") 0 0 no-repeat;
    width:40px;
    height:40px;
    cursor:pointer;
    z-index:100;
    .transition(~"top 0.7s, right 0.7s");

    &:hover {
      background-position:-53px 0;
    }

  }

  &.detail .back {
    right:0px;  
    top:138px;  
  }

  .filters {
    
    margin:0;  
    padding:0;    
    background:url("/images/accordeon-fond.png") repeat-x left bottom;
    .transition(0.4s); 

    h3 {
      position:relative;
      display:block;
      padding:0px 15px;      
      margin:0;

      cursor:pointer;
      border:0;      

      font-size: 18px;
      color: #E31B1D;
      letter-spacing:0.05em;


      &.top05 {
        margin-top:5px !important;
      }

      &:after {
        content:"";
        position:absolute;
        top:10px;
        right:15px;

        display:block;
        background:url("/images/accordeon-bt.png") -29px 0 no-repeat;
        width:19px;
        height:19px;
      }
    }

    .inputs {              
      overflow:hidden;
      max-height:320px;
      margin:0;
      padding:0 16px;
      padding-bottom:30px;  
      .transition(0.4s); 
      
      label {
        display:inline;  
        color:#808080;   
        line-height:18px;

        &.select {
          font-size: 12px;          
          color: #E31B1D;
          text-transform: uppercase;

          select {
            font-size: 15px;            
            color: #4D4D4D;
          }

          .span3 {
            padding-top:10px;
          }          
        }
      }                

    }

    .reset {
      padding-top:14px;
      cursor:pointer;
    }

    .internat {    
      display:block;
      padding-top:0px;  
      padding-bottom:5px;  
      font-size: 16px;
      color: #4D4D4D;
    }

    &.hidden {

      h3:after {
        background-position:0 0;
      }
      
      .inputs {
        padding:0 16px;
        max-height:0px;      
      }
    }

  }  

  .lycee {

    .addr, .effectif-parts {
      font-size: 18px;
      line-height: 18px;
      color: #333;
      padding-right:35px;
    }

    .access-time {
      font-size: 16px;
      line-height: 17px;
      color: #666666;
      padding-right:35px;
      p {
        margin:0;
      }
    }

    hr {
      margin:12px 0;
      margin-bottom:10px;
      background:#dbdbdb;

      &.bottom0 {
        margin-bottom:0 !important;
      }
    }

    .sort {
      font-size:12px;
      color:#666666;
    }

    .leplus {

      h3 {
        text-align:center;              
        font-size: 18px;        
        color: #E31B1D;
        text-transform: uppercase;
      }

      color:#333333;
    }

    .les-filieres {            

      font-size: 16px;
      line-height: 22px;
      color: #333;

      .filters{
        background:white;

        .inputs {
          max-height:500px;
        }

        &.hidden .inputs {
          max-height:0px;
        }

        &.hidden h4:after {
          .rotate(-180deg);
        }
      }

      h3, h4 {
        font-size: 18px;
        letter-spacing:0.05em;
        line-height:22px;        
        color:#E31B1D;
        margin:0;
      }

      h4 {
        position:relative;
        text-transform: uppercase;
        border-bottom:1px solid #363636;
        cursor:pointer;

        &:after {
          content:"";
          position:absolute;
          top:5px;
          right:10px;

          width:13px;
          height:6px;
          background:url("/images/bac-fleche.png") no-repeat;
          .transition(0.6s);
        }
      }

      .la-filiere {
        background:#cccccc;
        font-size: 14px;
        line-height: 16px;        
        color: #333;
        padding:4px 10px;
        font-weight:bold;
        border-bottom:1px solid #fff;
      }

      ul,li,ol,h5,.inputs {
        padding:0;
        margin:0;
        list-style:none;
      }

      .la-sous-filiere {        
        font-size: 14px;
        line-height: 16px;        
        color: #333;
        padding:4px 10px;
        padding-left:50px;
        background:#e6e6e6;

        &.odd {
          background:white;
        }
      }
      

    }
  }
  
}

#menu-footer {
  font-size:12px;
  position:absolute;  
  padding:10px 15px;
  bottom:0px;
  left:0px;
  background:#fff;
  color:#666666;
  width:100%;

}

.js-overlay {
  z-index:20;

  position:absolute;
  top:0;
  bottom:0;
  left:0;
  right:0; 

  background:fade(#000, 70%);   
}

.js-popup-box {

  text-align:center;

  padding:50px 40px;
  width:370px;

  z-index:25;
  position:absolute;
  top:10%;
  left:50%;
  margin-left:(370px+40px*2px)/-2px;
  

  background: #fff;
  .border-radius(5px);
  .box-shadow(0 2px 20px 0 rgba(0,0,0,0.5) );
  .transition(max-height 0.6s);

  font-size:20px;

  h2 {    
    font-size: 20px;
    line-height:24px;        
    color:#E31B1D;
    margin:0;
    margin-bottom:30px;
    text-transform: uppercase; 
  }
}
